<!DOCTYPE html>
<html>
<head>
  <title>Les Prats 2024</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol/dist/L.Control.Locate.min.css" />
  <link rel="stylesheet" href="track/style.css" />
  <style>
    .section-south {
      --track-color: #de3abd;
    }
    .section-north {
      --track-color: #f084da;
    }
    
    h3 {
      margin-bottom: 0.2em;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol/dist/L.Control.Locate.min.js" charset="utf-8"></script>
  <script src="track/track.js"></script>
  <script src="audio.js"></script>
  <script>

  function flickr (embed) {
    const img = (/<img src="([^"]+)/.exec(embed || '') || [])[1];
    const lnk = (/href="([^"]+)/.exec(embed || '') || [])[1];

    if (!lnk || !img)
      return embed;

    return `<a class="flickr" href="${lnk}"><img src="${img}" /></a>`;
  }

  const T = track.from (L
    , { goto: 1
      , skip: 1
      , jump: 1
      }
    , { mark: 4
      , [track.default]: 3
      , part: 2
      , none: 1
      }
    , { legacy: (t, ...xs) => xs.reduce((t, x) => t.goto(...x), t) }
    )
   .show(
    'map',
    [[47.7, 5.3], 6],
    {attribution: '<br/>WhatsApp Klaas +32 474 75 69 30<br/>&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}
   )
   .add
    ( L.control.scale({metric: true, imperial: false})
    , L.control.locate()
    )
    .select(window.location.search.slice(1).split('&').filter(x => x))


   T.goto(51.2281956, 2.9265281, 'di 4/6', "Afrit", flickr('<a data-flickr-embed="true" href="https://www.flickr.com/photos/198383566@N06/53771857296" title="Untitled"><img src="https://live.staticflickr.com/65535/53771857296_e387eb7638_k.jpg" width="2048" height="1662" alt="Untitled"/></a>'))
    .skip.mark(51.0312761, 3.6666920, 'di 4/6', "Aftrap", flickr('<a data-flickr-embed="true" href="https://www.flickr.com/photos/198383566@N06/53770950022/in/photostream/" title="Untitled"><img src="https://live.staticflickr.com/65535/53770950022_6b5fa4e091_h.jpg" width="1478" height="1478" alt="Untitled"/></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"'))
    .goto(50.5433053, 3.6319306, 'di 4/6', "Afdak", flickr('<a data-flickr-embed="true" href="https://www.flickr.com/photos/198383566@N06/53772284405/in/photostream/" title="Untitled"><img src="https://live.staticflickr.com/65535/53772284405_e4dd038fca_h.jpg" width="1600" height="1600" alt="Untitled"/></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8">'))
    .goto.part(50.0288222, 4.1461188)
    .goto(49.7532991, 4.7722091, 'wo 5/6', 0, flickr('<a data-flickr-embed="true" href="https://www.flickr.com/photos/198383566@N06/53770950907/in/photostream/" title="Untitled"><img src="https://live.staticflickr.com/65535/53770950907_7b38ab6f7d_h.jpg" width="1600" height="1600" alt="Untitled"/></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8">'))
    .goto.part(49.1609139, 5.3859863)
    .goto(48.8617354, 5.5652860, 'do 6/6', 0, flickr('<a data-flickr-embed="true" href="https://www.flickr.com/photos/198383566@N06/53774309108" title="Untitled"><img src="https://live.staticflickr.com/65535/53774309108_271fd822eb_h.jpg" width="1600" height="1600" alt="Untitled"/></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8">'))
    .goto.part(48.3520865, 5.6939857)
    .goto(47.9130511, 5.9901425, 'vr 7/6', 0, flickr('<a data-flickr-embed="true" href="https://www.flickr.com/photos/198383566@N06/53776080801" title="Untitled"><img src="https://live.staticflickr.com/65535/53776080801_f56f4fd881_h.jpg" width="1600" height="1200" alt="Untitled"/></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8">'))
    .goto.part(47.6887374, 6.0435510)
    .goto.part(47.2897616, 5.7711365)
    .goto(47.0612958, 5.8199587, 'za 8/6', 0, flickr('<a data-flickr-embed="true" href="https://www.flickr.com/photos/198383566@N06/53778137333" title="Untitled"><img src="https://live.staticflickr.com/65535/53778137333_e5fe7084ec_h.jpg" width="1600" height="1600" alt="Untitled"/></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8">'))
    .goto.part(46.6808948, 5.5578764)
    .goto.part(46.0792138, 5.3770693)
    .goto(45.8172847, 5.4157994, 'zo 9/6', 0, flickr('<a data-flickr-embed="true" href="https://www.flickr.com/photos/198383566@N06/53780393684" title="Untitled"><img src="https://live.staticflickr.com/65535/53780393684_8ab2ef745a_h.jpg" width="1600" height="1600" alt="Untitled"/></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8">'))
    .goto.part(45.1997098, 5.6690731)
    .goto(44.8182514, 5.9474203, 'ma 10/6', 0, flickr('<a data-flickr-embed="true" href="https://www.flickr.com/photos/198383566@N06/53783030434" title="Untitled"><img src="https://live.staticflickr.com/65535/53783030434_a8d32d3652_h.jpg" width="1600" height="1600" alt="Untitled"/></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8">'))
    .goto.part(44.5352255, 6.3855404)
    .goto.mark(44.4122771077932, 6.5428130424239495, 'di 11/6', '<div class="essential_audio" data-url="Prats.mp3"></div>', flickr('<a data-flickr-embed="true" href="https://www.flickr.com/photos/198383566@N06/53784652966" title="Untitled"><img src="https://live.staticflickr.com/65535/53784652966_96f6e51f75_h.jpg" width="1600" height="1200" alt="Untitled"/></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"'), () => window.setTimeout(15, ()=>Essential_Audio.init()) )
  </script>
</body>
</html>
